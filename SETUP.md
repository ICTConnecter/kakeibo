# AIå®¶è¨ˆç°¿ã‚·ã‚¹ãƒ†ãƒ  - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ”§ å¿…è¦ãªæº–å‚™

### 1. Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. **Firebase Consoleã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://console.firebase.google.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
   - ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **Firestoreã®æœ‰åŠ¹åŒ–**
   - ã€ŒFirestore Databaseã€ã‚’é¸æŠ
   - ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã€
   - æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹

3. **Firebase Storageã®æœ‰åŠ¹åŒ–**
   - ã€ŒStorageã€ã‚’é¸æŠ
   - ã€Œå§‹ã‚ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã¯å¾Œã§è¨­å®š

4. **Firebaseè¨­å®šæƒ…å ±ã®å–å¾—**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆâš™ï¸ãƒãƒ¼ã‚¯ï¼‰
   - ã€Œå…¨èˆ¬ã€ã‚¿ãƒ–
   - ã€Œãƒã‚¤ã‚¢ãƒ—ãƒªã€â†’ Webã‚¢ãƒ—ãƒªã‚’è¿½åŠ 
   - è¡¨ç¤ºã•ã‚Œã‚‹è¨­å®šæƒ…å ±ã‚’ã‚³ãƒ”ãƒ¼

5. **Firebase Admin SDKã®è¨­å®š**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ ã€Œã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€
   - ã€Œæ–°ã—ã„ç§˜å¯†éµã®ç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

### 2. LINE LIFF ã®ä½œæˆ

1. **LINE Developers Consoleã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://developers.line.biz/console/
   - LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³

2. **ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½œæˆ**
   - ã€Œä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åã‚’å…¥åŠ›

3. **ãƒãƒ£ãƒãƒ«ã‚’ä½œæˆ**
   - ã€ŒLINEãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’é¸æŠ
   - ãƒãƒ£ãƒãƒ«åŸºæœ¬è¨­å®šã‚’å…¥åŠ›

4. **LIFFã‚¢ãƒ—ãƒªã‚’è¿½åŠ **
   - ã€ŒLIFFã€ã‚¿ãƒ–
   - ã€Œè¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - LIFFè¨­å®š:
     - LIFFã‚¢ãƒ—ãƒªå: AIå®¶è¨ˆç°¿
     - ã‚µã‚¤ã‚º: Full
     - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURL: http://localhost:3000 (é–‹ç™ºæ™‚)
     - Scope: profile, openid, email
   - LIFF IDã‚’ã‚³ãƒ”ãƒ¼

---

### 3. Google AI Studioï¼ˆGemini APIï¼‰ã®è¨­å®š

1. **Google AI Studioã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://aistudio.google.com/
   - Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³

2. **APIã‚­ãƒ¼ã‚’ä½œæˆ**
   - ã€ŒGet API keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ã€ŒCreate API keyã€
   - æ—¢å­˜ã®GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠã¾ãŸã¯æ–°è¦ä½œæˆ
   - APIã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼

**æ–™é‡‘ã«ã¤ã„ã¦:**
- Gemini 1.5 Flashã¯ç„¡æ–™æ ãŒã‚ã‚Šã¾ã™
- æœˆ60ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§ç„¡æ–™
- è©³ç´°: https://ai.google.dev/pricing

---

## ğŸ“ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```env
# Firebase (Client-side)
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXX
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef

# Firebase Admin (Server-side)
FIREBASE_ADMIN_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_ADMIN_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQI...\n-----END PRIVATE KEY-----\n"

# LINE LIFF
NEXT_PUBLIC_LIFF_ID=1234567890-abcdefgh

# Google AI Studio (Gemini API)
GOOGLE_AI_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXX
```

**æ³¨æ„ç‚¹:**
- `FIREBASE_ADMIN_PRIVATE_KEY` ã¯æ”¹è¡Œã‚’ `\n` ã«ç½®ãæ›ãˆã¦ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€
- `.env.local` ã¯Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼ˆ.gitignoreã«å«ã¾ã‚Œã¦ã„ã¾ã™ï¼‰

---

## ğŸ” Firebase Security Rulesã®è¨­å®š

### Firestore Rules

Firebase Console â†’ Firestore Database â†’ ãƒ«ãƒ¼ãƒ«:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // æ”¯å‡ºã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /expenses/{expenseId} {
      allow read, write: if request.auth != null;
    }
    
    // åå…¥ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /incomes/{incomeId} {
      allow read, write: if request.auth != null;
    }
    
    // ã‚«ãƒ†ã‚´ãƒªã€ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã€çµŒè²»ã‚¿ã‚¤ãƒ—
    match /{collection}/{docId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
  }
}
```

### Storage Rules

Firebase Console â†’ Storage â†’ ãƒ«ãƒ¼ãƒ«:

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /receipts/{imageId} {
      allow create: if request.auth != null
                    && request.resource.size < 5 * 1024 * 1024
                    && request.resource.contentType.matches('image/.*');
      allow read: if request.auth != null;
      allow delete: if request.auth != null;
    }
  }
}
```

---

## ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

### 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹

### 3. LIFFãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ç¢ºèª

LINE Developersã§è¨­å®šã—ãŸLIFF URLã«ã‚¢ã‚¯ã‚»ã‚¹:
- https://liff.line.me/{YOUR_LIFF_ID}

---

## âœ… å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] LIFFãƒ­ã‚°ã‚¤ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ãƒ›ãƒ¼ãƒ ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ¬ã‚·ãƒ¼ãƒˆæ’®å½±ãƒ»è§£æãŒå‹•ä½œã™ã‚‹
- [ ] æ”¯å‡ºç™»éŒ²ãŒã§ãã‚‹
- [ ] åå…¥ç™»éŒ²ãŒã§ãã‚‹
- [ ] å–å¼•ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¨­å®šç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Firebaseæ¥ç¶šã‚¨ãƒ©ãƒ¼

```
Error: Firebase: Error (auth/configuration-not-found)
```

**è§£æ±ºç­–:**
- `.env.local` ã®ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
- Firebaseè¨­å®šãŒæ­£ã—ã„ã‹ç¢ºèª
- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•

### LIFFåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼

```
Error: LIFF ID is not set
```

**è§£æ±ºç­–:**
- `NEXT_PUBLIC_LIFF_ID` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- LIFF IDã®å½¢å¼ãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆä¾‹: 1234567890-abcdefghï¼‰

### ãƒ¬ã‚·ãƒ¼ãƒˆè§£æã‚¨ãƒ©ãƒ¼

```
Error: GOOGLE_AI_API_KEY environment variable is not set
```

**è§£æ±ºç­–:**
- Google AI Studioã®APIã‚­ãƒ¼ã‚’ç¢ºèª
- APIã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ç¢ºèª
- ç„¡æ–™æ ã‚’ä½¿ã„åˆ‡ã£ã¦ã„ãªã„ã‹ç¢ºèª

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Firebase Documentation](https://firebase.google.com/docs)
- [LINE LIFF Documentation](https://developers.line.biz/ja/docs/liff/)
- [Google AI Studio](https://aistudio.google.com/)
- [Next.js Documentation](https://nextjs.org/docs)

---

## ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

åŸºæœ¬æ©Ÿèƒ½ãŒå‹•ä½œã—ãŸã‚‰ã€ä»¥ä¸‹ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„:

1. å®¶è¨ˆç°¿ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆHouseholdï¼‰ã®åˆæœŸåŒ–
2. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•ä½œæˆ
3. ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒ»çµŒè²»ã‚¿ã‚¤ãƒ—ã®ç®¡ç†ç”»é¢è©³ç´°
4. ãƒ¬ãƒãƒ¼ãƒˆç”»é¢ã®ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆChart.jsä½¿ç”¨ï¼‰
5. å…±æœ‰æ©Ÿèƒ½ã®å®Ÿè£…

è©³ç´°ã¯ `README.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

